import{r as L,g as Se,R as v}from"./index.CZlPm10g.js";/* empty css                            */var P1={exports:{}},d1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=L,Me=Symbol.for("react.element"),_e=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Ae=Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ne={key:!0,ref:!0,__self:!0,__source:!0};function ee(t,e,n){var r,o={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Be.call(e,r)&&!Ne.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Me,type:t,key:a,ref:l,props:o,_owner:Ae.current}}d1.Fragment=_e;d1.jsx=ee;d1.jsxs=ee;P1.exports=d1;var K=P1.exports,re={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=o(a,r(u)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)e.call(a,u)&&a[u]&&(l=o(l,u));return l}function o(a,l){return l?a?a+" "+l:a+l:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(re);var xe=re.exports;const Y=Se(xe);function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_.apply(null,arguments)}var C1=["top-right","bottom-right","bottom-left","top-left"],f1=["top","right","bottom","left"],He={PAWNS_COUNT:8,KNIGHTS_COUNT:2,BISHOPS_COUNT:2,ROOKS_COUNT:2,QUEENS_COUNT:1,KINGS_COUNT:1},i=function(){function t(){}return t.detectDrawByRepeatMoves=function(n){if(n.length<8)return!1;var r=n.slice(n.length-8),o=r.slice(0,4),a=r.slice(4),l=o.join(""),u=a.join("");return l===u},t.getCastlingType=function(n){if(!(n.figure.touched||n.figure.type!=="king")){var r=n.to[0]-n.from[0];if(!(r===0||Math.abs(r)===1))return r>0?"0-0":"0-0-0"}},t}();i.getNextMoves=function(t,e,n,r){var o=e[0],a=e[1];r===void 0&&(r=!1);var l=t[a][o].figure,u=l.type,c=[];switch(u){case"pawn":var h=i.getNextMovesPawn(t,[o,a],r);c=i.correctionPossibleMoves(t,[o,a],h,n);break;case"bishop":var f=i.getNextMovesBishop(t,[o,a]);c=i.correctionPossibleMoves(t,[o,a],f,n);break;case"knight":var b=i.getNextMovesKnight(t,[o,a]);c=i.correctionPossibleMoves(t,[o,a],b,n);break;case"rook":var d=i.getNextMovesRook(t,[o,a]);c=i.correctionPossibleMoves(t,[o,a],d,n);break;case"queen":var C=i.getNextMovesQueen(t,[o,a]);c=i.correctionPossibleMoves(t,[o,a],C,n);break;case"king":c=i.getNextMovesKing(t,[o,a],r);break}return c};i.reverseChessBoard=function(t){var e=[].concat(t),n=[].concat(e.reverse());return n.map(function(r){return[].concat(r).reverse()})};i.reverseMove=function(t,e){var n=t.from,r=t.to,o=t.figure,a=t.type,l={figure:o,from:[e-(n[0]+1),e-(n[1]+1)],to:[e-(r[0]+1),e-(r[1]+1)],type:a};return l};i.reverseMoveVector=function(t,e){e===void 0&&(e=8);var n=t[0],r=t[1],o=[[e-(n[0]+1),e-(n[1]+1)],[e-(r[0]+1),e-(r[1]+1)]];return o};i.checkInBorderBoard=function(t,e){return e[0]>=0&&e[0]<t.length&&e[1]>=0&&e[1]<t.length};i.getFigureColor=function(t,e){return t[e[1]][e[0]].figure.color};i.getFigureType=function(t,e){var n;return(n=t[e[1]][e[0]].figure)===null||n===void 0?void 0:n.type};i.checkEnemy=function(t,e,n){var r,o,a=i.getFigureColor(t,e),l=(r=t[n[1]][n[0]])===null||r===void 0||(o=r.figure)===null||o===void 0?void 0:o.color;return!!l&&l!==a};i.checkTeammate=function(t,e,n){var r,o=i.getFigureColor(t,e),a=(r=t[n[1]][n[0]].figure)===null||r===void 0?void 0:r.color;return!!a&&a===o};i.checkEnemyKing=function(t,e,n){var r,o,a=((r=t[n[1]][n[0]])===null||r===void 0||(o=r.figure)===null||o===void 0?void 0:o.type)==="king";return a?i.checkEnemy(t,e,n):!1};i.checkBeatedCell=function(t,e){var n;return!!((n=t[e[1]][e[0]])!==null&&n!==void 0&&n.beated)};i.hasFigure=function(t,e){var n;return!!((n=t[e[1]][e[0]])!==null&&n!==void 0&&n.figure)};i.checkFigureIsLongRange=function(t,e){var n=t[e[1]][e[0]].figure;return n?.type==="bishop"||n?.type==="rook"||n?.type==="queen"};i.getCountEnemys=function(t,e,n){var r=0;return n.forEach(function(o){i.checkEnemy(t,e,o)&&!i.checkEnemyKing(t,e,o)&&(r+=1)}),r};i.getTeammateKingPos=function(t,e){for(var n=i.getFigureColor(t,e),r=void 0,o=0;o<t.length;o++){for(var a=t[o],l=0;l<a.length;l++){var u=a[l].figure;if(u?.color===n&&u.type==="king"){r=[l,o];break}}if(r)break}return r};i.getAllEnemysPositions=function(t,e){var n=[];return t.forEach(function(r,o){return r.forEach(function(a,l){i.checkEnemy(t,e,[l,o])&&n.push([l,o])})}),n};i.getAllTeammatesPositionsByColor=function(t,e){var n=[];return t.forEach(function(r,o){return r.forEach(function(a,l){a.figure&&a.figure.color===e&&n.push([l,o])})}),n};i.checkPossibleMoveTo=function(t,e,n){return i.checkInBorderBoard(t,n)&&(!i.hasFigure(t,n)||i.hasFigure(t,n)&&i.checkEnemy(t,e,n)&&!i.checkEnemyKing(t,e,n))};i.checkPossibleAttackTo=function(t,e,n){return i.checkInBorderBoard(t,n)&&(!i.hasFigure(t,n)||i.checkEnemy(t,e,n))};i.checkAttackedCell=function(t,e,n){return i.checkInBorderBoard(t,n)};i.checkAttackedCellByPawn=function(t,e,n){switch(n.typeMove){case"default":case"first":return!1;case"attack":return i.checkInBorderBoard(t,n.pos)}};i.checkPosBetweenAttckerAndKing=function(t,e,n,r){return e[0]===r[0]&&e[0]===n[0]?e[1]>n[1]&&e[1]<r[1]||e[1]>r[1]&&e[1]<n[1]:e[1]===r[1]&&e[1]===n[1]||e[1]>n[1]&&e[1]<r[1]||e[1]>r[1]&&e[1]<n[1]?e[0]>n[0]&&e[0]<r[0]||e[0]>r[0]&&e[0]<n[0]:e[0]>n[0]&&e[0]<r[0]||e[0]>r[0]&&e[0]<n[0]?e[1]>n[1]&&e[1]<r[1]||e[1]>r[1]&&e[1]<n[1]:!1};i.correctionPossibleMoves=function(t,e,n,r){var o=i.getTeammateKingPos(t,e),a=i.getAllEnemysPositions(t,e),l=a.filter(function(C){return i.checkFigureIsLongRange(t,C)}),u=[],c=!1;l.forEach(function(C){var g=t[C[1]][C[0]].figure.type;switch(g){case"bishop":C1.forEach(function(s){if(!c){var p=i.getFullAttackedLine(t,C,s),S=p.findIndex(function(w){return w[0]===o[0]&&w[1]===o[1]}),B=p.findIndex(function(w){return w[0]===e[0]&&w[1]===e[1]}),F=i.getCountEnemys(t,C,p);c=S>-1&&B>-1&&S>B&&F===1,c&&n.forEach(function(w){[].concat(p,[C]).forEach(function(R){R[0]===w[0]&&R[1]===w[1]&&u.push(w)})})}});break;case"rook":if(c)break;f1.forEach(function(s){if(!c){var p=i.getFullAttackedLine(t,C,s),S=p.findIndex(function(w){return w[0]===o[0]&&w[1]===o[1]}),B=p.findIndex(function(w){return w[0]===e[0]&&w[1]===e[1]}),F=i.getCountEnemys(t,C,p);c=S>-1&&B>-1&&S>B&&F===1,c&&n.forEach(function(w){[].concat(p,[C]).forEach(function(R){R[0]===w[0]&&R[1]===w[1]&&u.push(w)})})}});break;case"queen":if(c)break;[].concat(C1,f1).forEach(function(s){if(!c){var p=i.getFullAttackedLine(t,C,s),S=p.findIndex(function(w){return w[0]===o[0]&&w[1]===o[1]}),B=p.findIndex(function(w){return w[0]===e[0]&&w[1]===e[1]}),F=i.getCountEnemys(t,C,p);c=S>-1&&B>-1&&S>B&&F===1,c&&n.forEach(function(w){[].concat(p,[C]).forEach(function(R){R[0]===w[0]&&R[1]===w[1]&&u.push(w)})})}});break}});var h=c?u:n;if(r.length===1){var f=[],b=r[0],d=b[b.length-1];return b.forEach(function(C){h.forEach(function(g){C[0]===g[0]&&C[1]===g[1]&&(i.checkPosBetweenAttckerAndKing(t,g,o,d)||i.checkEnemy(t,o,g))&&f.push(g)})}),f}return r.length>1?[]:h};i.getFullAttackedLine=function(t,e,n){var r,o=[];switch(n){case"top-right":for(r=[e[0]+1,e[1]-1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]+1,r[1]-1];break;case"bottom-right":for(r=[e[0]+1,e[1]+1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]+1,r[1]+1];break;case"bottom-left":for(r=[e[0]-1,e[1]+1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]-1,r[1]+1];break;case"top-left":for(r=[e[0]-1,e[1]-1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]-1,r[1]-1];break;case"top":for(r=[e[0],e[1]-1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0],r[1]-1];break;case"right":for(r=[e[0]+1,e[1]];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]+1,r[1]];break;case"bottom":for(r=[e[0],e[1]+1];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0],r[1]+1];break;case"left":for(r=[e[0]-1,e[1]];i.checkPossibleAttackTo(t,e,r);)o.push(r),r=[r[0]-1,r[1]];break}return o};i.getAllAttckedPostionsByEnemys=function(t,e,n){var r=i.getAllEnemysPositions(t,e),o=[];return r.forEach(function(a){var l=a[0],u=a[1],c=t[u][l].figure,h=c.type;switch(h){case"pawn":var f=i.calcPawnMoves(t,[l,u],n,i.checkAttackedCellByPawn);o=[].concat(o,f);break;case"bishop":var b=i.calcDiagonalMoves(t,[l,u],i.checkAttackedCell,function(S,B,F){return i.hasFigure(S,F)&&!i.checkEnemyKing(S,[l,u],F)});o=[].concat(o,b);break;case"knight":var d=i.calcKnightMoves(t,[l,u],i.checkAttackedCell);o=[].concat(o,d);break;case"rook":var C=i.calcHorizontalAndVerticalMoves(t,[l,u],i.checkAttackedCell,function(S,B,F){return i.hasFigure(S,F)&&!i.checkEnemyKing(S,[l,u],F)});o=[].concat(o,C);break;case"queen":var g=i.calcDiagonalMoves(t,[l,u],i.checkAttackedCell,function(S,B,F){return i.hasFigure(S,F)&&!i.checkEnemyKing(S,[l,u],F)}),s=i.calcHorizontalAndVerticalMoves(t,[l,u],i.checkAttackedCell,function(S,B,F){return i.hasFigure(S,F)&&!i.checkEnemyKing(S,[l,u],F)});o=[].concat(o,g,s);break;case"king":var p=i.calcKingMoves(t,[l,u],n,!0);o=[].concat(o,p);break}}),o};i.calcDiagonalMoves=function(t,e,n,r){n===void 0&&(n=i.checkPossibleMoveTo),r===void 0&&(r=i.checkEnemy);for(var o=[],a=[e[0]-1,e[1]-1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]-1,a[1]-1];for(a=[e[0]+1,e[1]-1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]+1,a[1]-1];for(a=[e[0]+1,e[1]+1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]+1,a[1]+1];for(a=[e[0]-1,e[1]+1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]-1,a[1]+1];return o};i.calcHorizontalAndVerticalMoves=function(t,e,n,r){n===void 0&&(n=i.checkPossibleMoveTo),r===void 0&&(r=i.checkEnemy);for(var o=[],a=[e[0]-1,e[1]];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]-1,a[1]];for(a=[e[0],e[1]-1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0],a[1]-1];for(a=[e[0]+1,e[1]];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0]+1,a[1]];for(a=[e[0],e[1]+1];n(t,e,a)&&(o.push([].concat(a)),!r(t,e,a));)a=[a[0],a[1]+1];return o};i.calcKnightMoves=function(t,e,n){n===void 0&&(n=i.checkPossibleMoveTo);var r=[],o=[[e[0]+1,e[1]-2],[e[0]-1,e[1]-2],[e[0]-2,e[1]+1],[e[0]-2,e[1]-1],[e[0]+2,e[1]+1],[e[0]+2,e[1]-1],[e[0]+1,e[1]+2],[e[0]-1,e[1]+2]];return o.forEach(function(a){n(t,e,a)&&r.push(a)}),r};i.checkPossiblePawnMoveToPos=function(t,e,n,r,o){switch(n.typeMove){case"first":return r==="white"&&o||r==="black"&&!o?e[1]===1&&!i.hasFigure(t,[n.pos[0],n.pos[1]-1])&&!i.hasFigure(t,n.pos):e[1]===t.length-2&&!i.hasFigure(t,[n.pos[0],n.pos[1]+1])&&!i.hasFigure(t,n.pos);case"default":return!i.hasFigure(t,n.pos);case"attack":return i.checkInBorderBoard(t,n.pos)&&i.hasFigure(t,n.pos)&&i.checkEnemy(t,e,n.pos)&&!i.checkEnemyKing(t,e,n.pos)||i.checkInBorderBoard(t,n.pos)&&i.checkBeatedCell(t,n.pos)}};i.calcPawnMoves=function(t,e,n,r){r===void 0&&(r=i.checkPossiblePawnMoveToPos);var o=i.getFigureColor(t,e),a=[],l=[{typeMove:"first",pos:[e[0],e[1]-2]},{typeMove:"default",pos:[e[0],e[1]-1]},{typeMove:"attack",pos:[e[0]-1,e[1]-1]},{typeMove:"attack",pos:[e[0]+1,e[1]-1]}],u=[{typeMove:"first",pos:[e[0],e[1]+2]},{typeMove:"default",pos:[e[0],e[1]+1]},{typeMove:"attack",pos:[e[0]-1,e[1]+1]},{typeMove:"attack",pos:[e[0]+1,e[1]+1]}],c=o==="white"&&!n||o==="black"&&n?l:u;return c.forEach(function(h){r(t,e,h,o,n)&&a.push(h.pos)}),a};i.checkPossibleCastling=function(t,e,n,r){var o,a;if(t[e[1]][e[0]].figure&&(o=t[e[1]][e[0]].figure)!==null&&o!==void 0&&o.touched)return!1;var l=i.getAllAttckedPostionsByEnemys(t,e,r),u=l.find(function(p){return p[0]===e[0]&&p[1]===e[1]});if(u)return!1;var c=[].concat(n),h=c.pop();if(!t[h[1]][h[0]]||!t[h[1]][h[0]].figure||t[h[1]][h[0]].figure&&(a=t[h[1]][h[0]].figure)!==null&&a!==void 0&&a.touched)return!1;var f=c.filter(function(p){return i.hasFigure(t,p)});if(f.length>0)return!1;for(var b=!0,d=0;d<l.length;d++){for(var C=l[d],g=0;g<c.length;g++){var s=c[g];if(s[0]===C[0]&&s[1]===C[1]){b=!1;break}}if(!b)break}return b};i.calcKingMoves=function(t,e,n,r){r===void 0&&(r=!1);var o=[],a=[[e[0],e[1]-1],[e[0]+1,e[1]-1],[e[0]+1,e[1]],[e[0]+1,e[1]+1],[e[0],e[1]+1],[e[0]-1,e[1]+1],[e[0]-1,e[1]],[e[0]-1,e[1]-1]],l=[[e[0]+1,e[1]],[e[0]+2,e[1]],[e[0]+3,e[1]]],u=[[e[0]-1,e[1]],[e[0]-2,e[1]],[e[0]-3,e[1]],[e[0]-4,e[1]]],c=[[e[0]-1,e[1]],[e[0]-2,e[1]],[e[0]-3,e[1]]],h=[[e[0]+1,e[1]],[e[0]+2,e[1]],[e[0]+3,e[1]],[e[0]+4,e[1]]],f=n?c:l,b=n?h:u;if(r)return a;var d=i.getAllAttckedPostionsByEnemys(t,e,n);return a.forEach(function(C){if(i.checkPossibleMoveTo(t,e,C)){var g=d.find(function(s){return s[0]===C[0]&&s[1]===C[1]});g===void 0&&o.push(C)}}),i.checkPossibleCastling(t,e,f,n)&&f.forEach(function(C){return o.push(C)}),i.checkPossibleCastling(t,e,b,n)&&b.forEach(function(C){return o.push(C)}),o};i.getNextMovesPawn=function(t,e,n){return i.calcPawnMoves(t,e,n)};i.getNextMovesBishop=function(t,e){return i.calcDiagonalMoves(t,e)};i.getNextMovesKnight=function(t,e){return i.calcKnightMoves(t,e)};i.getNextMovesRook=function(t,e){return i.calcHorizontalAndVerticalMoves(t,e)};i.getNextMovesQueen=function(t,e){var n=i.calcDiagonalMoves(t,e),r=i.calcHorizontalAndVerticalMoves(t,e),o=[].concat(n,r);return o};i.getNextMovesKing=function(t,e,n){return i.calcKingMoves(t,e,n)};i.getLinesWithCheck=function(t,e,n){n===void 0&&(n=!1);var r=i.getAllTeammatesPositionsByColor(t,e),o=[];return r.forEach(function(a){var l=i.getFigureType(t,a);switch(l){case"bishop":C1.forEach(function(h){for(var f=i.getFullAttackedLine(t,a,h),b=!1,d=0;d<f.length;d++){var C=f[d];if(i.hasFigure(t,C)&&!i.checkEnemyKing(t,a,C))break;if(i.checkEnemyKing(t,a,C)){b=!0;break}}b&&o.push([].concat(f,[a]))});break;case"rook":f1.forEach(function(h){for(var f=i.getFullAttackedLine(t,a,h),b=!1,d=0;d<f.length;d++){var C=f[d];if(i.hasFigure(t,C)&&!i.checkEnemyKing(t,a,C))break;if(i.checkEnemyKing(t,a,C)){b=!0;break}}b&&o.push([].concat(f,[a]))});break;case"queen":[].concat(C1,f1).forEach(function(h){for(var f=i.getFullAttackedLine(t,a,h),b=!1,d=0;d<f.length;d++){var C=f[d];if(i.hasFigure(t,C)&&!i.checkEnemyKing(t,a,C))break;if(i.checkEnemyKing(t,a,C)){b=!0;break}}b&&o.push([].concat(f,[a]))});break;case"pawn":var u=[];(n&&e==="white"||!n&&e==="black")&&(u.push([a[0]+1,a[1]+1]),u.push([a[0]-1,a[1]+1])),(n&&e==="black"||!n&&e==="white")&&(u.push([a[0]+1,a[1]-1]),u.push([a[0]-1,a[1]-1])),u.forEach(function(h){i.checkInBorderBoard(t,h)&&i.checkEnemyKing(t,a,h)&&o.push([h,a])});break;case"knight":var c=[[a[0]+1,a[1]-2],[a[0]-1,a[1]-2],[a[0]-2,a[1]+1],[a[0]-2,a[1]-1],[a[0]+2,a[1]+1],[a[0]+2,a[1]-1],[a[0]+1,a[1]+2],[a[0]-1,a[1]+2]];c.forEach(function(h){i.checkInBorderBoard(t,h)&&i.checkEnemyKing(t,a,h)&&o.push([h,a])});break}}),o};i.changeState=function(t,e,n,r,o){var a=void 0,l=n[0]-r[0];if(e.type==="king"&&Math.abs(l)>1){if(l>0)if(o){var u=t.map(function(d,C){return d.map(function(g,s){return C===r[1]&&s===4?_({},g,{figure:{type:"rook",color:e.color,touched:!0}}):C===r[1]&&s===5?_({},g,{figure:{type:"king",color:e.color,touched:!0}}):C===r[1]&&s===7||C===r[1]&&s===r[0]?_({},g,{figure:void 0}):g})});return{updatedCells:u,attackedPos:a}}else{var c=t.map(function(d,C){return d.map(function(g,s){return C===r[1]&&s===5?_({},g,{figure:{type:"rook",color:e.color,touched:!0}}):C===r[1]&&s===6?_({},g,{figure:{type:"king",color:e.color,touched:!0}}):C===r[1]&&s===7||C===r[1]&&s===r[0]?_({},g,{figure:void 0}):g})});return{updatedCells:c,attackedPos:a}}if(l<0)if(o){var h=t.map(function(d,C){return d.map(function(g,s){return C===r[1]&&s===2?_({},g,{figure:{type:"rook",color:e.color,touched:!0}}):C===r[1]&&s===1?_({},g,{figure:{type:"king",color:e.color,touched:!0}}):C===r[1]&&s===0||C===r[1]&&s===r[0]?_({},g,{figure:void 0}):g})});return{updatedCells:h,attackedPos:a}}else{var f=t.map(function(d,C){return d.map(function(g,s){return C===r[1]&&s===3?_({},g,{figure:{type:"rook",color:e.color,touched:!0}}):C===r[1]&&s===2?_({},g,{figure:{type:"king",color:e.color,touched:!0}}):C===r[1]&&s===0||C===r[1]&&s===r[0]?_({},g,{figure:void 0}):g})});return{updatedCells:f,attackedPos:a}}}var b=t.map(function(d,C){return d.map(function(g,s){if(n[0]===s&&n[1]===C)return{figure:_({},e,{touched:!0})};if(r[0]===s&&r[1]===C)return{figure:void 0};if(e.type==="pawn"&&i.checkBeatedCell(t,n)&&C===r[1]&&s===n[0])return a=[s,C],{figure:void 0,beated:!1};if(e.type==="pawn"){var p=n[1]-r[1];if(Math.abs(p)===2&&(p>0&&C===n[1]-1&&n[0]===s||p<0&&C===n[1]+1&&n[0]===s))return{figure:void 0,beated:!0}}return _({},g,{beated:g.beated?!1:g.beated})})});return{updatedCells:b,attackedPos:a}};i.transformPawnToFigure=function(t,e,n,r){var o=[].concat(t);return o.map(function(a,l){return a.map(function(u,c){return c===e[0]&&l===e[1]?{beated:!1,figure:void 0}:c===n[0]&&l===n[1]?{beated:!1,figure:r}:_({},u)})})};i.getFieldsWithFigures=function(t){var e=[];return t.forEach(function(n){return n.forEach(function(r){r.figure&&e.push(r)})}),e};i.getGameResult=function(t,e,n,r){var o=i.getAllTeammatesPositionsByColor(t,n),a=i.getFieldsWithFigures(t);if(a.length===2)return{resultType:"draw"};if(a.length===3){var l=a.find(function(h){var f,b;return((f=h.figure)===null||f===void 0?void 0:f.type)==="knight"||((b=h.figure)===null||b===void 0?void 0:b.type)==="bishop"});if(l)return{resultType:"draw"}}var u=[];o.forEach(function(h){var f=i.getNextMoves(t,h,e,r);u.push(f.length)});var c=u.reduce(function(h,f){return h+f});if(e.length>0&&c===0)return{resultType:"mat",winColor:n==="white"?"black":"white"};if(e.length===0&&c===0)return{resultType:"pat"}};i.getFiguresCountByType=function(t,e){var n=t.filter(function(o){var a=o.figure;return a?.type===e}),r=n.length;return r};i.getBeatedFigures=function(t,e,n){n===void 0&&(n=He);var r=[];t.forEach(function(a){var l=a.filter(function(u){return!!u.figure&&u.figure.color===e});l.length>0&&(r=[].concat(r,l))});var o={pawn:n.PAWNS_COUNT-i.getFiguresCountByType(r,"pawn"),knight:n.KNIGHTS_COUNT-i.getFiguresCountByType(r,"knight"),bishop:n.BISHOPS_COUNT-i.getFiguresCountByType(r,"bishop"),rook:n.ROOKS_COUNT-i.getFiguresCountByType(r,"rook"),queen:n.QUEENS_COUNT-i.getFiguresCountByType(r,"queen")};return o};var ne=["a","b","c","d","e","f","g","h"],Te={white:{pawn:"P",knight:"N",bishop:"B",rook:"R",queen:"Q",king:"K"},black:{pawn:"p",knight:"n",bishop:"b",rook:"r",queen:"q",king:"k"}},Re={P:{type:"pawn",color:"white"},N:{type:"knight",color:"white"},B:{type:"bishop",color:"white"},R:{type:"rook",color:"white"},Q:{type:"queen",color:"white"},K:{type:"king",color:"white"},p:{type:"pawn",color:"black"},n:{type:"knight",color:"black"},b:{type:"bishop",color:"black"},r:{type:"rook",color:"black"},q:{type:"queen",color:"black"},k:{type:"king",color:"black"}},Ve=function(e){return[8-parseInt(e[1])+1,ne.findIndex(function(n){return n===e[0]})]},Ge=function(e,n){if(e==="-")return n;var r=[].concat(n);return e.includes("K")&&(r[r.length-1][r.length-1].figure=_({},r[r.length-1][r.length-1].figure,{touched:!1}),r[r.length-1][4].figure=_({},r[r.length-1][4].figure,{touched:!1})),e.includes("Q")&&(r[r.length-1][0].figure=_({},r[r.length-1][0].figure,{touched:!1}),r[r.length-1][4].figure=_({},r[r.length-1][4].figure,{touched:!1})),e.includes("k")&&(r[0][r.length-1].figure=_({},r[0][r.length-1].figure,{touched:!1}),r[0][4].figure=_({},r[0][4].figure,{touched:!1})),e.includes("q")&&(r[0][0].figure=_({},r[0][r.length-1].figure,{touched:!1}),r[0][4].figure=_({},r[0][4].figure,{touched:!1})),r},Oe=function(e){var n=[],r=e.split("/");return r.forEach(function(o){for(var a=[],l=0;l<o.length;l++){var u=o[l];if(u===".")a.push({figure:void 0});else{var c=Re[u];a.push({figure:_({},c,{touched:!0})})}}n.push(a)}),n.filter(function(o){return o.length>0})},Ie=function(e){var n={boardState:[],currentColor:"white"},r=e.split(" "),o=r[0],a=r[1],l=r[2],u=r[3];r.slice(4);for(var c="",h=0;h<o.length;h++){if(!isNaN(parseInt(o[h]))){for(var f=parseInt(o[h]),b=0;b<f;b++)c+=".";continue}c+=o[h]}if(n.boardState=Oe(c),n.currentColor=a==="w"?"white":"black",n.boardState=Ge(l,n.boardState),u!=="-"){var d=Ve(u);n.boardState[d[0]][d[1]]=_({},n.boardState[d[0]][d[1]],{beated:!0})}return n},Ke=function(e){for(var n="-",r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)if(e[r][o].beated){n=ne[o]+(e.length-r).toString();break}return n},Ze=function(e){var n="",r=0;return e.forEach(function(o,a){o.forEach(function(l,u){l.figure?(r>0&&(n+=r.toString(),r=0),n+=Te[l.figure.color][l.figure.type]):r+=1}),r>0&&(n+=r.toString(),r=0),a!==e.length-1&&(n+="/")}),n},De=function(e){var n="",r="",o=e.length-1;return e.forEach(function(a,l){return a.forEach(function(u,c){l===0&&c===0&&u.figure&&u.figure.type==="rook"&&!u.figure.touched&&(r="q"),l===0&&c===4&&(!u.figure||u.figure.type!=="king"||u.figure.touched)&&(r="-"),l===0&&c===o&&u.figure&&u.figure.type==="rook"&&!u.figure.touched&&r!=="-"&&(r="k"+r),l===o&&c===0&&u.figure&&u.figure.type==="rook"&&!u.figure.touched&&(n="Q"),l===o&&c===4&&(!u.figure||u.figure.type!=="king"||u.figure.touched)&&(n="-"),l===o&&c===o&&u.figure&&u.figure.type==="rook"&&!u.figure.touched&&r!=="-"&&(n="K"+n)})}),n==="-"&&r==="-"?"-":(n+r).replace("-","")},W1=function(e,n,r){r===void 0&&(r=1);var o=De(e),a=Ze(e),l=n==="white"?"w":"b",u=Ke(e),c=r===0?0:r-1;return a+" "+l+" "+o+" "+u+" "+c+" "+r},N={chessBoard:"_3XI6H",figuresLayout:"_2SyRK",controlLayout:"_3OVc8",controlLayoutGrabbing:"_G0IIl",interactiveLayout:"_3THn5",selectedCell:"_3vcXe",controlCell:"_2yJs1",interactiveCell:"_27yHq",possibleMoveMark:"_UYGA_",row:"_2XKSc",cell:"_ssFQn",cellLight:"_1407I",figure:"_19mE-",holdedFigure:"_3u_-s",bluredFigure:"_3SfMJ",hiddenFigure:"_1cIvE",markedCell:"_Zly-L",checkedCell:"_31pmr",arrow:"_12Bbd",arrowEnd:"_1BC3I",figurePicker:"_13OXq",figurePickerItem:"_16zCe",chessBoardFigurePicker:"_1ZGj2"},$e={"pawn-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M37.3492 12.5238C37.3492 15.286 36.1576 17.7735 34.2541 19.5131L39.1587 22.9297V29.1905H34.3573C34.5888 32.0925 36.4757 34.9969 38.9172 37.5303C41.5083 40.2188 44.6258 42.3871 46.6961 43.5546L47 43.726V53H9V43.726L9.30392 43.5546C11.3742 42.3871 14.4917 40.2188 17.0828 37.5303C19.5243 34.9969 21.4112 32.0925 21.6427 29.1905H16.8413V22.9297L21.4091 19.7477C19.351 18.0011 18.0476 15.4127 18.0476 12.5238C18.0476 7.26396 22.3684 3 27.6984 3C33.0284 3 37.3492 7.26396 37.3492 12.5238Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M31.8338 19.6768C31.7847 18.906 32.0841 18.155 32.6449 17.6425C34.0658 16.344 34.9237 14.522 34.9237 12.5238C34.9237 8.74601 31.7893 5.5 27.6984 5.5C23.6075 5.5 20.4732 8.74601 20.4732 12.5238C20.4732 14.6125 21.4113 16.5112 22.9509 17.8177C23.5415 18.319 23.8681 19.0781 23.8319 19.8658C23.7958 20.6535 23.4012 21.3775 22.7673 21.819L19.2668 24.2575V26.6905H21.6427C22.3206 26.6905 22.9675 26.9828 23.4267 27.4967C23.886 28.0106 24.1157 28.6991 24.0601 29.3954C23.757 33.1938 21.3675 36.6318 18.8036 39.2921C16.3921 41.7943 13.5841 43.8574 11.4255 45.1831V50.5H44.5745V45.1831C42.4159 43.8574 39.6079 41.7943 37.1964 39.2921C34.6325 36.6318 32.243 33.1938 31.9399 29.3954C31.8843 28.6991 32.114 28.0106 32.5733 27.4967C33.0325 26.9828 33.6794 26.6905 34.3573 26.6905H36.7332V24.2575L32.8959 21.5844C32.2749 21.1519 31.8828 20.4477 31.8338 19.6768ZM39.1587 22.9297V29.1905H34.3573C34.424 30.0266 34.6281 30.8629 34.9433 31.6905C35.7221 33.7353 37.1791 35.7268 38.9172 37.5303C41.5083 40.2188 44.6258 42.3871 46.6961 43.5546L47 43.726V53H9V43.726L9.30392 43.5546C11.3742 42.3871 14.4917 40.2188 17.0828 37.5303C18.8209 35.7268 20.2779 33.7353 21.0567 31.6905C21.3719 30.8629 21.576 30.0266 21.6427 29.1905H16.8413V22.9297L21.4091 19.7477C20.7719 19.207 20.207 18.5855 19.7308 17.8994C18.6689 16.3695 18.0476 14.5183 18.0476 12.5238C18.0476 7.26396 22.3684 3 27.6984 3C33.0284 3 37.3492 7.26396 37.3492 12.5238C37.3492 14.3952 36.8023 16.1405 35.8575 17.6126C35.4078 18.3133 34.868 18.9521 34.2541 19.5131L39.1587 22.9297Z",fill:"#3E3F4F"}))},"knight-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M32.9167 12.8482L25.1852 4.08704C24.066 6.15131 22.981 9.79459 24.5409 12.4247C23.7838 12.4902 23.0602 12.6146 22.5005 12.8328C18.9299 14.225 15.012 17.8218 13.0863 25.3052C12.5287 27.4722 11.5252 28.5098 10.3324 29.7432C9.2073 30.9065 7.91384 32.244 6.66755 34.8675C4.10004 40.2722 11.0292 45.6769 16.0818 40.768C18.9224 38.0082 21.4054 36.8689 23.49 35.9123C26.4905 34.5356 28.6657 33.5374 29.8944 28.6312C30.479 30.9197 30.2452 36.3207 24.6331 39.6161C19.0211 42.9116 17.8519 49.8534 17.9688 51.9131H49.8874C49.8874 32.359 47.2227 15.4643 32.9167 12.8482Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.0604 3.00684C25.4257 2.96664 25.7878 3.10529 26.0279 3.37731L33.5087 11.8544C40.9503 13.3628 45.3275 18.5751 47.8193 25.6764C50.3374 32.853 51 42.1196 51 51.913C51 52.5133 50.5018 53 49.8871 53H17.9686C17.3779 53 16.8901 52.5493 16.8574 51.9732C16.7889 50.7648 17.0879 48.3569 18.1183 45.8263C19.1555 43.279 20.9809 40.4923 24.0595 38.6845C26.1617 37.4501 27.4243 35.8968 28.1465 34.3608C28.1439 34.3633 28.1412 34.3659 28.1385 34.3685C26.9293 35.5354 25.4847 36.198 24.0415 36.86L23.963 36.896C21.9061 37.8398 19.5666 38.9151 16.8664 41.5386C13.9475 44.3745 10.348 44.2838 7.87371 42.5723C5.44537 40.8925 4.12188 37.6432 5.65784 34.4099C6.98024 31.6262 8.37192 30.1871 9.5232 28.9967C10.6946 27.7855 11.5232 26.9197 12.0068 25.0402C14.0037 17.28 18.1294 13.3666 22.0877 11.8232C22.3618 11.7164 22.6569 11.6305 22.9621 11.5613C22.5948 10.3424 22.5869 9.0646 22.7562 7.89187C22.9933 6.24878 23.5924 4.7017 24.2015 3.5783C24.3735 3.26093 24.695 3.04705 25.0604 3.00684ZM25.4952 6.10342C25.259 6.75438 25.0651 7.46829 24.9601 8.19533C24.764 9.5541 24.8927 10.8497 25.5037 11.8797C25.6943 12.2012 25.7037 12.5955 25.5285 12.9253C25.3533 13.255 25.0178 13.4745 24.6389 13.5073C23.9231 13.5692 23.3246 13.6817 22.9129 13.8422C19.7299 15.0832 16.0198 18.3634 14.1654 25.5701C13.537 28.0123 12.367 29.2221 11.1592 30.4709L11.1412 30.4895C10.0423 31.6257 8.84692 32.8618 7.67682 35.3249C6.64528 37.4963 7.50259 39.6517 9.16009 40.7983C10.7717 41.913 13.163 42.0703 15.2967 39.9973C18.2743 37.1045 20.898 35.9006 23.0092 34.9318L23.0166 34.9284C24.5479 34.2258 25.6605 33.7038 26.5743 32.822C27.4586 31.9686 28.2317 30.6948 28.8132 28.3729C28.9348 27.8873 29.3798 27.5454 29.8916 27.5442C30.4035 27.5431 30.8501 27.883 30.974 28.368C31.6414 30.9807 31.3516 36.9391 25.2063 40.5476C22.6729 42.0353 21.1077 44.3672 20.1865 46.6297C19.5273 48.2485 19.2218 49.7734 19.1174 50.8261H48.7714C48.722 41.4882 48.0155 32.9409 45.7138 26.3812C43.3397 19.6151 39.3401 15.1286 32.7117 13.9165C32.4634 13.8711 32.2384 13.7446 32.0735 13.5578L25.4952 6.10342Z",fill:"#3E3F4F"}),v.createElement("path",{d:"M23.9202 21.4782C23.9202 22.6789 22.9237 23.6521 21.6945 23.6521C20.4652 23.6521 19.4688 22.6789 19.4688 21.4782C19.4688 20.2776 20.4652 19.3043 21.6945 19.3043C22.9237 19.3043 23.9202 20.2776 23.9202 21.4782Z",fill:"#3E3F4F"}))},"bishop-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M29.8545 30.4038H26.0727C26.0727 23.7267 28.1789 17.0608 32.8385 12.1815C33.5687 11.2259 34 10.046 34 8.76923C34 5.58296 31.3137 3 28 3C24.6863 3 22 5.58296 22 8.76923C22 10.3412 22.6539 11.7664 23.7144 12.807C19.9664 15.3761 13 22.2626 13 30.8846C13 39.5857 20.0948 43.1084 23.8167 43.8315L10 46.1818V53L46 53V46.1818L31.8556 43.7965C35.6197 42.9999 42.5 39.4532 42.5 30.8846C42.5 25.2741 39.7818 20.2727 36.4727 16.6364C32.8385 19.3636 29.8545 25.7273 29.8545 30.4038Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M28 5.27273C25.4418 5.27273 23.4694 7.28575 23.4694 9.64336C23.4694 10.8145 23.9467 11.8863 24.7431 12.6809C24.9818 12.919 25.1036 13.2554 25.0746 13.5966C25.0457 13.9377 24.8691 14.2472 24.594 14.439C22.9307 15.5983 20.5141 17.7636 18.5232 20.6218C16.5325 23.4797 15.0204 26.9522 15.0204 30.7535C15.0204 34.5515 16.5284 37.1728 18.4256 38.9466C20.3531 40.7487 22.6967 41.683 24.2802 41.9959C24.8042 42.0994 25.181 42.575 25.1748 43.1251C25.1687 43.6751 24.7813 44.1416 24.2552 44.2326L12.2041 46.317V50.7273L43.7959 50.7273V46.3184L31.4388 44.1995C30.9156 44.1098 30.5286 43.6485 30.5178 43.1018C30.5069 42.555 30.8753 42.0778 31.3944 41.9661C34.7008 41.2546 40.5102 38.1436 40.5102 30.7535C40.5102 26.1643 38.4904 21.9735 35.8369 18.7327C34.6056 19.9172 33.4539 21.6155 32.5602 23.5208C31.4833 25.8165 30.843 28.2803 30.843 30.2946C30.843 30.9222 30.3496 31.4309 29.741 31.4309H26.1907C25.5821 31.4309 25.0887 30.9222 25.0887 30.2946C25.0887 23.7121 27.1242 17.0654 31.7054 12.1582C32.2285 11.4429 32.5306 10.5762 32.5306 9.64336C32.5306 7.28575 30.5582 5.27273 28 5.27273ZM21.2653 9.64336C21.2653 5.91808 24.3365 3 28 3C31.6635 3 34.7347 5.91808 34.7347 9.64336C34.7347 11.1277 34.2402 12.4962 33.4134 13.5965C33.3886 13.6295 33.3621 13.6611 33.3339 13.6911C29.4537 17.8225 27.5365 23.4098 27.3146 29.1582H28.6902C28.8791 27.0011 29.5778 24.6592 30.576 22.5311C31.751 20.0265 33.4032 17.6856 35.2985 16.2394C35.7507 15.8944 36.3823 15.9559 36.7639 16.3822C39.9902 19.9872 42.7143 25.0235 42.7143 30.7535C42.7143 37.0527 39.2071 40.7331 35.8163 42.6462L45.0787 44.2344C45.6103 44.3255 46 44.7997 46 45.3554V51.8636C46 52.165 45.8839 52.4541 45.6772 52.6672C45.4705 52.8803 45.1902 53 44.898 53L11.102 53C10.4934 53 10 52.4912 10 51.8636V45.3554C10 44.8003 10.3889 44.3265 10.9197 44.2347L19.799 42.6989C18.8291 42.1599 17.8509 41.4771 16.9451 40.6303C14.6386 38.4738 12.8163 35.2611 12.8163 30.7535C12.8163 26.3247 14.5742 22.3954 16.7331 19.296C18.5307 16.7151 20.6432 14.6555 22.3709 13.2919C21.675 12.2488 21.2653 10.9955 21.2653 9.64336Z",fill:"#3E3F4F"}))},"rook-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M9 5H18.7436V10.434H22.641V5H33.359V10.434H37.2564V5H47V13.1509L39.2051 18.5849L41.1538 36H14.8462L16.7949 18.5849L9 13.1509V5Z",fill:"white"}),v.createElement("path",{d:"M14.8462 39H41.1538L47 45.7547V53H9V45.7547L14.8462 39Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.7436 12.834C17.404 12.834 16.3181 11.7594 16.3181 10.434V7.4H11.4255V11.906L18.1919 16.6229C18.9198 17.1304 19.3082 17.9918 19.2036 18.8668L17.5 33.5H38.5L36.7964 18.8668C36.6918 17.9918 37.0802 17.1304 37.8081 16.6229L44.5745 11.906V7.4H39.6819V10.434C39.6819 11.7594 38.596 12.834 37.2564 12.834H33.359C32.0194 12.834 30.9334 11.7594 30.9334 10.434V7.4H25.0666V10.434C25.0666 11.7594 23.9806 12.834 22.641 12.834H18.7436ZM22.641 5H33.359V10.434H37.2564V5H47V13.1509L39.2051 18.5849L41.1538 36H14.8462L16.7949 18.5849L9 13.1509V5H18.7436V10.434H22.641V5ZM16 41.5L11.4255 46.5953V50.6H44.5745V46.5953L40 41.5H16ZM41.1538 39H14.8462L9 45.7547V53H47V45.7547L41.1538 39Z",fill:"#3E3F4F"}))},"queen-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M21.9569 11.4809C23.5293 10.8482 24.6452 9.25337 24.6452 7.38596C24.6452 4.96366 22.7676 3 20.4516 3C18.1356 3 16.2581 4.96366 16.2581 7.38596C16.2581 9.62443 17.8614 11.4712 19.9325 11.7387L18.0624 27.5614L9.04701 19.372C9.87134 18.5711 10.3871 17.4275 10.3871 16.1579C10.3871 13.7356 8.50958 11.7719 6.19355 11.7719C3.87752 11.7719 2 13.7356 2 16.1579C2 18.5802 3.87752 20.5439 6.19355 20.5439C6.60125 20.5439 6.99537 20.483 7.36805 20.3695L12.0645 37.2105L16.9212 45.5224L12.0645 46.421V53L44 53V46.421L39.081 45.5187L43.9355 37.2105L48.632 20.3695C49.0046 20.483 49.3987 20.5439 49.8064 20.5439C52.1225 20.5439 54 18.5802 54 16.1579C54 13.7356 52.1225 11.7719 49.8064 11.7719C47.4904 11.7719 45.6129 13.7356 45.6129 16.1579C45.6129 17.4275 46.1287 18.5711 46.953 19.372L37.9376 27.5614L36.0675 11.7387C38.1386 11.4712 39.7419 9.62443 39.7419 7.38596C39.7419 4.96366 37.8644 3 35.5484 3C33.2324 3 31.3548 4.96366 31.3548 7.38596C31.3548 9.25337 32.4707 10.8482 34.0431 11.4809L28 25.807L21.9569 11.4809Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.6997 9.60433C20.8359 9.50943 20.9831 9.42951 21.139 9.36676C21.8633 9.07534 22.4166 8.31673 22.4166 7.38596C22.4166 6.16443 21.4841 5.27273 20.4516 5.27273C19.4191 5.27273 18.4866 6.16443 18.4866 7.38596C18.4866 8.50989 19.2842 9.36408 20.2124 9.48393C20.3823 9.50587 20.5454 9.54678 20.6997 9.60433ZM19.9325 11.7387C19.8677 11.7303 19.8034 11.7204 19.7396 11.709C17.7627 11.3553 16.2581 9.55443 16.2581 7.38596C16.2581 4.96366 18.1356 3 20.4516 3C22.7676 3 24.6452 4.96366 24.6452 7.38596C24.6452 9.16107 23.6369 10.6899 22.1867 11.3801C22.1702 11.3879 22.1538 11.3956 22.1372 11.4032C22.0778 11.4305 22.0177 11.4564 21.9569 11.4809L28 25.807L34.0431 11.4809C33.9823 11.4564 33.9222 11.4305 33.8628 11.4032C33.8462 11.3956 33.8298 11.3879 33.8134 11.3801C32.3631 10.6899 31.3548 9.16108 31.3548 7.38596C31.3548 4.96366 33.2324 3 35.5484 3C37.8644 3 39.7419 4.96366 39.7419 7.38596C39.7419 9.55443 38.2373 11.3553 36.2604 11.709C36.1966 11.7204 36.1323 11.7303 36.0675 11.7387L37.9376 27.5614L46.953 19.372C46.8819 19.3029 46.8132 19.2313 46.7468 19.1573C46.6555 19.0555 46.5688 18.9491 46.487 18.8384C45.939 18.0972 45.6129 17.1674 45.6129 16.1579C45.6129 13.7356 47.4904 11.7719 49.8064 11.7719C52.1225 11.7719 54 13.7356 54 16.1579C54 18.5802 52.1225 20.5439 49.8064 20.5439C49.5014 20.5439 49.204 20.5098 48.9175 20.4451C48.8561 20.4313 48.7952 20.416 48.7349 20.3994C48.7004 20.3899 48.6661 20.3799 48.632 20.3695L43.9355 37.2105L39.081 45.5187L44 46.421V53L12.0645 53V46.421L16.9212 45.5224L12.0645 37.2105L7.36805 20.3695C7.33392 20.3799 7.29961 20.3899 7.26513 20.3994C7.20478 20.416 7.1439 20.4313 7.08252 20.4451C6.79599 20.5098 6.49857 20.5439 6.19355 20.5439C3.87752 20.5439 2 18.5802 2 16.1579C2 13.7356 3.87752 11.7719 6.19355 11.7719C8.50958 11.7719 10.3871 13.7356 10.3871 16.1579C10.3871 17.1674 10.061 18.0972 9.51303 18.8384C9.43124 18.9491 9.34451 19.0555 9.25318 19.1573C9.18684 19.2313 9.11807 19.3029 9.04701 19.372L18.0624 27.5614L19.9325 11.7387ZM10.6656 23.8859L16.5801 29.2585C17.1997 29.8213 18.0746 29.9865 18.8507 29.6872C19.6269 29.3878 20.1756 28.6735 20.2749 27.8334L21.6218 16.4377L25.9528 26.7051C26.3047 27.5392 27.1096 28.0797 28 28.0797C28.8904 28.0797 29.6953 27.5392 30.0472 26.7051L34.3782 16.4377L35.7251 27.8334C35.8244 28.6735 36.3731 29.3878 37.1493 29.6872C37.9254 29.9865 38.8003 29.8213 39.4199 29.2585L45.3344 23.8859L41.8717 36.3027L37.1665 44.3554C36.7923 44.9959 36.7499 45.783 37.0532 46.4615C37.3565 47.14 37.9668 47.6236 38.6865 47.7556L41.7714 48.3215V50.7273L14.2931 50.7273V48.3185L17.319 47.7587C18.0379 47.6257 18.6471 47.1418 18.9497 46.4636C19.2522 45.7854 19.2096 44.9991 18.8356 44.3591L14.1283 36.3027L10.6656 23.8859ZM7.19788 18.1034C7.28739 17.9677 7.39172 17.8412 7.50978 17.7265C7.90424 17.3432 8.15853 16.7895 8.15853 16.1579C8.15853 14.9364 7.22608 14.0447 6.19355 14.0447C5.16102 14.0447 4.22857 14.9364 4.22857 16.1579C4.22857 17.3794 5.16102 18.2711 6.19355 18.2711C6.38265 18.2711 6.56206 18.2431 6.73038 18.1918C6.88389 18.1451 7.04061 18.1157 7.19788 18.1034ZM48.8021 18.1034C48.9594 18.1157 49.1161 18.1451 49.2696 18.1918C49.4379 18.2431 49.6174 18.2711 49.8064 18.2711C50.839 18.2711 51.7714 17.3794 51.7714 16.1579C51.7714 14.9364 50.839 14.0447 49.8064 14.0447C48.7739 14.0447 47.8415 14.9364 47.8415 16.1579C47.8415 16.7895 48.0958 17.3432 48.4902 17.7265C48.6083 17.8412 48.7126 17.9677 48.8021 18.1034ZM35.3003 9.60433C35.4546 9.54678 35.6177 9.50587 35.7876 9.48393C36.7158 9.36408 37.5134 8.50989 37.5134 7.38596C37.5134 6.16443 36.5809 5.27273 35.5484 5.27273C34.5159 5.27273 33.5834 6.16443 33.5834 7.38596C33.5834 8.31673 34.1367 9.07534 34.861 9.36676C35.0169 9.42951 35.1641 9.50943 35.3003 9.60433Z",fill:"#3E3F4F"}))},"king-white":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.4055 3H30.5945L30.7296 7.31034H35.7835V12.4828H30.8918L31.1294 18.3388C31.2242 18.2274 31.3219 18.1182 31.4225 18.0116C36.1472 13.0061 43.1524 10.3424 48.3235 14.6379C53.5125 18.9483 53.5125 28.8621 46.3679 34.5958C42.3207 37.8438 38.6956 40.9749 38.8743 45.5544L46.1437 46.5345V53H9.85632V46.5345L17.1257 45.5544C17.3044 40.9749 13.6793 37.8438 9.6321 34.5958C2.4875 28.8621 2.4875 18.9483 7.67648 14.6379C12.8476 10.3424 19.8528 13.0061 24.5775 18.0116C24.6781 18.1182 24.7758 18.2274 24.8706 18.3388L25.1082 12.4828H20.2165V7.31034H25.2704L25.4055 3ZM20.5175 22.8044C23.6886 27.982 24.1083 34.0345 24.1083 36.6666C22.5188 36.6694 16.527 34.0418 13.3546 29.7281C11.0708 26.6226 10.4753 22.0151 12.433 20.2263C14.3908 18.4375 18.5356 19.5685 20.5175 22.8044ZM35.4825 22.8044C32.3114 27.982 31.8917 34.0345 31.8917 36.6666C33.4812 36.6694 39.473 34.0418 42.6454 29.7281C44.9292 26.6226 45.5248 22.0151 43.567 20.2263C41.6092 18.4375 37.4644 19.5685 35.4825 22.8044Z",fill:"white"}),v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24.4333 4.05309C24.4517 3.46625 24.9344 3 25.5236 3H30.4764C31.0656 3 31.5483 3.46625 31.5667 4.05309L31.6627 7.12294H35.4291C36.0316 7.12294 36.52 7.60959 36.52 8.20989V13.1574C36.52 13.2013 36.5173 13.2446 36.5123 13.2871C37.2951 12.9327 38.0953 12.6474 38.9042 12.4427C42.0378 11.6496 45.3184 12.0711 48.0977 14.3847C53.6752 19.0278 53.4681 29.323 46.2168 35.1549C44.2754 36.7163 42.5402 38.17 41.3011 39.7435C40.2848 41.0341 39.6388 42.3604 39.4947 43.845L45.4642 44.6515C46.0051 44.7246 46.4085 45.1848 46.4085 45.7286V51.913C46.4085 52.5134 45.9201 53 45.3177 53H10.6823C10.0799 53 9.59149 52.5134 9.59149 51.913V45.7286C9.59149 45.1848 9.9949 44.7246 10.5358 44.6515L16.5053 43.845C16.3612 42.3604 15.7152 41.0341 14.6989 39.7435C13.4598 38.17 11.7246 36.7163 9.78319 35.1549L10.4085 34.3829L9.78319 35.1549C2.5319 29.323 2.32478 19.0278 7.90235 14.3847L8.60171 15.2189L7.90235 14.3847C10.6816 12.0711 13.9622 11.6496 17.0958 12.4427C17.9047 12.6474 18.7049 12.9327 19.4877 13.2871C19.4827 13.2446 19.48 13.2013 19.48 13.1574V8.20989C19.48 7.60959 19.9684 7.12294 20.5709 7.12294H24.3373L24.4333 4.05309ZM21.2957 14.2444C22.2495 14.8239 23.1645 15.5005 24.0229 16.2506L24.1041 14.2444H21.2957ZM23.9379 19.1897C21.7887 16.9079 19.1629 15.2087 16.5588 14.5497C13.9879 13.899 11.4575 14.2579 9.30107 16.0531C4.97314 19.6559 4.76602 28.3262 11.1534 33.4632C13.0749 35.0086 15.0012 36.6058 16.4153 38.4015C17.8503 40.224 18.8089 42.3135 18.7108 44.8333C18.6903 45.3608 18.2923 45.7974 17.7674 45.8683L11.7731 46.6782V50.8261H44.2269V46.6782L38.2327 45.8683C37.7077 45.7974 37.3097 45.3608 37.2892 44.8333C37.1911 42.3135 38.1497 40.224 39.5847 38.4015C40.9988 36.6058 42.9251 35.0086 44.8466 33.4632C51.234 28.3262 51.0269 19.6559 46.6989 16.0531C44.5425 14.2579 42.0121 13.899 39.4412 14.5497C36.8371 15.2087 34.2113 16.9079 32.0621 19.1897C31.9794 19.2776 31.8985 19.3682 31.8194 19.4612C31.5289 19.8031 31.0575 19.9324 30.6323 19.7867C30.2071 19.6411 29.9151 19.2503 29.897 18.8026L29.6702 13.2012C29.6582 12.9056 29.7677 12.6179 29.9734 12.4045C30.1791 12.1911 30.4632 12.0705 30.7601 12.0705H34.3383V9.29685H30.6054C30.0161 9.29685 29.5334 8.8306 29.5151 8.24376L29.419 5.17391H26.581L26.4849 8.24376C26.4666 8.8306 25.9839 9.29685 25.3946 9.29685H21.6617V12.0705H25.2399C25.5368 12.0705 25.8209 12.1911 26.0266 12.4045C26.2323 12.6179 26.3418 12.9056 26.3298 13.2012L26.103 18.8026C26.0849 19.2503 25.7929 19.6411 25.3677 19.7867C24.9425 19.9324 24.4711 19.8031 24.1806 19.4612C24.1015 19.3682 24.0207 19.2776 23.9379 19.1898M31.9771 16.2506C32.8355 15.5005 33.7505 14.8239 34.7042 14.2444H31.8959L31.9771 16.2506ZM17.3096 18.9553C19.0173 19.4744 20.7009 20.6833 21.7898 22.465C24.9721 27.672 25.3763 33.7022 25.3763 36.2898C25.3763 36.8893 24.8891 37.3756 24.2874 37.3767C23.6967 37.3778 22.8967 37.1574 22.0822 36.8511C21.2259 36.529 20.2214 36.0603 19.1766 35.4622C17.0987 34.2726 14.7747 32.521 13.1408 30.2946C11.9357 28.6523 11.1798 26.6258 10.9787 24.7519C10.7832 22.9302 11.0918 20.9651 12.4037 19.7639L13.1417 20.5643L12.4037 19.7639C13.7217 18.5571 15.6305 18.4449 17.3096 18.9553ZM16.673 21.0346C15.434 20.658 14.4305 20.8605 13.8798 21.3646C13.323 21.8745 12.9814 22.9684 13.148 24.5208C13.3089 26.0208 13.9272 27.6832 14.9019 29.0114C16.296 30.9111 18.3454 32.4792 20.2634 33.5772C21.2164 34.1228 22.1154 34.5399 22.8527 34.8172C22.9599 34.8576 23.0615 34.8941 23.1574 34.9271C23.0096 32.1253 22.348 27.558 19.9265 23.5957C19.1237 22.2821 17.8834 21.4025 16.673 21.0346ZM39.327 21.0346C38.1166 21.4025 36.8763 22.2821 36.0735 23.5957C33.652 27.558 32.9904 32.1253 32.8426 34.9271C32.9385 34.8941 33.0401 34.8576 33.1473 34.8172C33.8846 34.5399 34.7836 34.1228 35.7366 33.5772C37.6546 32.4792 39.704 30.9111 41.0981 29.0114C42.0728 27.6832 42.6911 26.0208 42.852 24.5208C43.0186 22.9684 42.677 21.8745 42.1202 21.3646C41.5695 20.8605 40.566 20.658 39.327 21.0346ZM38.6904 18.9553C40.3695 18.4449 42.2783 18.5571 43.5963 19.7639C44.9082 20.9651 45.2168 22.9302 45.0213 24.7519C44.8202 26.6258 44.0643 28.6523 42.8592 30.2946C41.2253 32.521 38.9013 34.2726 36.8234 35.4622C35.7786 36.0603 34.7741 36.529 33.9178 36.8511C33.1033 37.1574 32.3033 37.3778 31.7126 37.3767C31.1109 37.3756 30.6237 36.8893 30.6237 36.2898C30.6237 33.7022 31.0279 27.672 34.2102 22.465C35.2991 20.6833 36.9827 19.4744 38.6904 18.9553Z",fill:"#3E3F4F"}))},"pawn-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M37.3492 12.5238C37.3492 15.286 36.1576 17.7735 34.2541 19.5131L39.1587 22.9297V29.1905H34.3573C34.5888 32.0925 36.4757 34.9969 38.9172 37.5303C41.5083 40.2188 44.6258 42.3871 46.6961 43.5546L47 43.726V53H9V43.726L9.30392 43.5546C11.3742 42.3871 14.4917 40.2188 17.0828 37.5303C19.5243 34.9969 21.4112 32.0925 21.6427 29.1905H16.8413V22.9297L21.4091 19.7477C19.351 18.0011 18.0476 15.4127 18.0476 12.5238C18.0476 7.26396 22.3684 3 27.6984 3C33.0284 3 37.3492 7.26396 37.3492 12.5238Z",fill:"#2A2B37"}))},"knight-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M33.1658 12.1594L25.0408 3C23.8647 5.1581 22.7245 8.96699 24.3638 11.7166C23.5681 11.7851 22.8078 11.9152 22.2196 12.1433C18.4672 13.5988 14.35 17.3591 12.3263 25.1827C11.7404 27.4481 10.6857 28.5329 9.43229 29.8223C8.24992 31.0386 6.89064 32.4368 5.58093 35.1795C2.88277 40.8299 10.1645 46.4803 15.4742 41.3483C18.4594 38.463 21.0687 37.2719 23.2594 36.2719C26.4125 34.8325 28.6985 33.7891 29.9897 28.6598C30.6041 31.0524 30.3583 36.6988 24.4607 40.1441C18.5631 43.5893 17.3344 50.8467 17.4573 53H51C51 32.5571 48.1997 14.8944 33.1658 12.1594Z",fill:"#2A2B37"}),v.createElement("ellipse",{cx:"21.3721",cy:"21.1814",rx:"2.33898",ry:"2.27273",fill:"white"}))},"bishop-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M29.8545 30.4038H26.0727C26.0727 23.7267 28.1789 17.0608 32.8385 12.1815C33.5687 11.2259 34 10.046 34 8.76923C34 5.58296 31.3137 3 28 3C24.6863 3 22 5.58296 22 8.76923C22 10.3412 22.6539 11.7664 23.7144 12.807C19.9664 15.3761 13 22.2626 13 30.8846C13 39.5857 20.0948 43.1084 23.8167 43.8315L10 46.1818V53L46 53V46.1818L31.8556 43.7965C35.6197 42.9999 42.5 39.4532 42.5 30.8846C42.5 25.2741 39.7818 20.2727 36.4727 16.6364C32.8385 19.3636 29.8545 25.7273 29.8545 30.4038Z",fill:"#2A2B37"}))},"rook-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M9 5H18.7436V10.434H22.641V5H33.359V10.434H37.2564V5H47V13.1509L39.2051 18.5849L41.1538 36H14.8462L16.7949 18.5849L9 13.1509V5Z",fill:"#2A2B37"}),v.createElement("path",{d:"M14.8462 39H41.1538L47 45.7547V53H9V45.7547L14.8462 39Z",fill:"#2A2B37"}))},"queen-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M21.9569 11.4809C23.5293 10.8482 24.6452 9.25337 24.6452 7.38596C24.6452 4.96366 22.7676 3 20.4516 3C18.1356 3 16.2581 4.96366 16.2581 7.38596C16.2581 9.62443 17.8614 11.4712 19.9325 11.7387L18.0624 27.5614L9.04701 19.372C9.87134 18.5711 10.3871 17.4275 10.3871 16.1579C10.3871 13.7356 8.50958 11.7719 6.19355 11.7719C3.87752 11.7719 2 13.7356 2 16.1579C2 18.5802 3.87752 20.5439 6.19355 20.5439C6.60125 20.5439 6.99537 20.483 7.36805 20.3695L12.0645 37.2105L16.9212 45.5224L12.0645 46.421V53L44 53V46.421L39.081 45.5187L43.9355 37.2105L48.632 20.3695C49.0046 20.483 49.3987 20.5439 49.8064 20.5439C52.1225 20.5439 54 18.5802 54 16.1579C54 13.7356 52.1225 11.7719 49.8064 11.7719C47.4904 11.7719 45.6129 13.7356 45.6129 16.1579C45.6129 17.4275 46.1287 18.5711 46.953 19.372L37.9376 27.5614L36.0675 11.7387C38.1386 11.4712 39.7419 9.62443 39.7419 7.38596C39.7419 4.96366 37.8644 3 35.5484 3C33.2324 3 31.3548 4.96366 31.3548 7.38596C31.3548 9.25337 32.4707 10.8482 34.0431 11.4809L28 25.807L21.9569 11.4809Z",fill:"#2A2B37"}))},"king-black":function(e){return v.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.4055 3H30.5945L30.7296 7.31034H35.7835V12.4828H30.8918L31.1294 18.3388C31.2242 18.2274 31.3219 18.1182 31.4225 18.0116C36.1472 13.0061 43.1524 10.3424 48.3235 14.6379C53.5125 18.9483 53.5125 28.8621 46.3679 34.5958C42.3207 37.8438 38.6956 40.9749 38.8743 45.5544L46.1437 46.5345V53H9.85632V46.5345L17.1257 45.5544C17.3044 40.9749 13.6793 37.8438 9.6321 34.5958C2.4875 28.8621 2.4875 18.9483 7.67648 14.6379C12.8476 10.3424 19.8528 13.0061 24.5775 18.0116C24.6781 18.1182 24.7758 18.2274 24.8706 18.3388L25.1082 12.4828H20.2165V7.31034H25.2704L25.4055 3ZM20.5175 22.8044C23.6886 27.982 24.1083 34.0345 24.1083 36.6666C22.5188 36.6694 16.527 34.0418 13.3546 29.7281C11.0708 26.6226 10.4753 22.0151 12.433 20.2263C14.3908 18.4375 18.5356 19.5685 20.5175 22.8044ZM35.4825 22.8044C32.3114 27.982 31.8917 34.0345 31.8917 36.6666C33.4812 36.6694 39.473 34.0418 42.6454 29.7281C44.9292 26.6226 45.5248 22.0151 43.567 20.2263C41.6092 18.4375 37.4644 19.5685 35.4825 22.8044Z",fill:"#2A2B37"}))}},qe=92,J1=4.6,ze="#3697ce",Ue="#fafafc",Qe="#d8d9e6",We="#e3f1fe",Je="3px solid #6ac2fd",Xe="#6ac2fd",Ye="#3697ce",je="#e95b5c",te=$e,u1={cellSize:qe,circleMarkColor:ze,whiteCellColor:Ue,blackCellColor:Qe,selectedCellColor:We,selectedCellBorder:Je,arrowColor:Xe,markedCellColor:Ye,checkedCellColor:je,piecesMap:te},h1=function(e){return e.type+"-"+e.color},Pe=function(e,n){return e%2===0&&n%2===0||e%2>0&&n%2>0},W=function(e){for(var n=[],r=0;r<e;r++)n.push(r);return n},e3=function(e){var n=[];return e.forEach(function(r,o){return r.forEach(function(a,l){a.figure&&n.push(_({},a.figure,{position:[l,o]}))})}),n},Q=function(e,n){return!!e.find(function(r){return r[0]===n[0]&&r[1]===n[1]})},X1=function(e,n){return e?!!e.find(function(r){return r[0]===n[0]&&r[1]===n[1]}):!1},r3=function(e){var n=e.figure,r=e.from,o=e.to;if(n.type!=="king"||r[1]!==o[1])return!1;var a=Math.abs(o[0]-r[0]);return a!==1},n3=function(e,n,r){return!!e.figure&&e.figure.type==="king"&&e.figure.color===n&&r.length>0},c1=function(e,n){return Math.atan(e/n)*180/Math.PI},t3=function(e,n){var r=n[0]-e[0],o=n[1]-e[1];return r>0&&o>0?c1(o,r)-90:r<0&&o<0||r<0&&o>0?c1(o,r)+90:r>0&&o<0?c1(o,r)-90:o===0&&r>0?-90:o===0&&r<0?90:r===0&&o<0?180:0},a3=function(e){if(!e)return u1;var n=Object.keys(u1),r={};return n.forEach(function(o){r[o]=e[o]||u1[o]}),r},o3=function(e,n){if(n===void 0&&(n=!1),n){var r=["queen","rook","bishop","knight"];return r.map(function(a){return{type:a,color:e,touched:!0}})}var o=["pawn","knight","bishop","rook","queen","king"];return o.map(function(a){return{type:a,color:e,touched:!0}})},i3=function(e){return typeof window>"u"?e:[e[0]-window.scrollX,e[1]-window.scrollY]},ae=function(e,n){return[e[0]*n.cellSize+(n.cellSize/2-10),e[1]*n.cellSize+n.cellSize/2]},l3=8,c3=function(e){var n=e.size,r=n===void 0?l3:n,o=e.boardConfig;return v.createElement("div",null,W(r).map(function(a,l){return v.createElement("div",{className:N.row,key:"cells-layout-"+l},W(r).map(function(u,c){return v.createElement("div",{style:{width:o.cellSize,height:o.cellSize,backgroundColor:Pe(l,c)?o.whiteCellColor:o.blackCellColor},key:"cells-layout-"+c})}))}))},u3=function(e){var n=e.initialState,r=e.change,o=e.reversed,a=e.boardConfig,l=L.useState([]),u=l[0],c=l[1];return L.useEffect(function(){c(e3(n))},[n]),L.useEffect(function(){r&&c(function(h){var f=[].concat(h),b=r.move,d=r.attackedPos,C=r.transformTo;if(r3(b)){var g=i.getCastlingType(b),s=b.figure.color;if(s==="white"){var p=f.findIndex(function(m){return m.color==="white"&&m.type==="king"});if(g==="0-0"){var S=f.findIndex(function(m){return m.color===s&&m.type==="rook"&&m.position[0]===7});return f[S].position[0]=5,f[p].position[0]=6,f}var B=f.findIndex(function(m){return m.color===s&&m.type==="rook"&&m.position[0]===0});return f[B].position[0]=3,f[p].position[0]=2,f}if(s==="black"){var F=f.findIndex(function(m){return m.color==="black"&&m.type==="king"});if(g==="0-0"){var w=f.findIndex(function(m){return m.color===s&&m.type==="rook"&&m.position[0]===7});return f[w].position[0]=5,f[F].position[0]=6,f}var R=f.findIndex(function(m){return m.color===s&&m.type==="rook"&&m.position[0]===0});return f[R].position[0]=3,f[F].position[0]=2,f}return f}var Z=b.from,V=b.to,y=f.find(function(m){return d?m.position[0]===d[0]&&m.position[1]===d[1]:m.position[0]===V[0]&&m.position[1]===V[1]});y&&(y.color==="white"?y.position=[8,y.position[1]]:y.position=[-1,y.position[1]]);var H=f.find(function(m){return m.position[0]===Z[0]&&m.position[1]===Z[1]});return H.position=b.to,C&&(H.type=C.type,H.color=C.color),f})},[r]),L.useEffect(function(){o&&c(function(h){var f=[].concat(h);return f.map(function(b){return _({},b,{position:[Math.abs(7-b.position[0]),Math.abs(7-b.position[1])]})})})},[o,n]),v.createElement("div",{className:N.figuresLayout},u.map(function(h,f){var b;return v.createElement("div",{key:f,className:Y([N.figure],(b={},b[N.hiddenFigure]=h.position[0]===-1||h.position[0]===8,b)),style:{top:a.cellSize*h.position[1]+"px",left:a.cellSize*h.position[0]+"px",transition:r&&r.withTransition?"all .15s ease-out":"none",width:a.cellSize,height:a.cellSize}},a.piecesMap[h1(h)]("80%"))}))},C3=8,f3=function(e){var n,r=e.size,o=r===void 0?C3:r,a=e.boardConfig,l=e.onClick,u=e.onGrabEnd,c=e.onGrabbing,h=e.onGrabStart,f=e.onRightClick,b=e.onGrabbingCell,d=e.onGrabEndRight,C=e.onGrabStartRight,g=L.useState(!1),s=g[0],p=g[1],S=function(y){l(y)},B=function(y){return function(H){p(!0),H.button===0&&h(y),H.button===2&&C(y)}},F=function(y){return function(H){H.button===0&&(p(!1),u(y)),H.button===2&&d(y)}},w=function(y){if(s){var H=y.pageX,m=y.pageY;c(H,m)}},R=function(y){return function(H){H.preventDefault(),f(y)}},Z=function(y){b(y)};return v.createElement("div",{className:Y(N.controlLayout,(n={},n[N.controlLayoutGrabbing]=s,n)),onMouseMove:w},W(o).map(function(V,y){return v.createElement("div",{className:N.row,key:"control-layout-"+y},W(o).map(function(H,m){return v.createElement("div",{key:"control-layout-"+m,className:N.controlCell,style:{width:a.cellSize,height:a.cellSize},onClick:function(){return S([m,y])},onMouseDown:B([m,y]),onMouseUp:F([m,y]),onContextMenu:R([m,y]),onMouseMove:function(){return Z([m,y])}})}))}))},d3=function(e){var n=e.config,r=e.onChange,o=e.onEndGame,a=L.useState(u1),l=a[0],u=a[1],c=L.useState([]),h=c[0],f=c[1],b=L.useState([]),d=b[0],C=b[1],g=L.useState([-1,-1]),s=g[0],p=g[1],S=L.useState(),B=S[0],F=S[1],w=L.useState([-1,-1]),R=w[0],Z=w[1],V=L.useState([]),y=V[0],H=V[1],m=L.useState(!1),O=m[0],v1=m[1],j=L.useState("white"),I=j[0],P=j[1],s1=L.useState(),e1=s1[0],r1=L.useState(),g1=r1[0],U=r1[1],J=L.useState([]),D=J[0],X=J[1],B1=L.useState([]),oe=B1[0],A1=B1[1],N1=L.useState([-1,-1]),ie=N1[0],le=N1[1],x1=L.useState([-1,-1]),n1=x1[0],k1=x1[1],H1=L.useState(),T1=H1[0],b1=H1[1],R1=L.useState([]),t1=R1[0],V1=R1[1],G1=L.useState([-1,-1]),E1=G1[0],O1=G1[1],I1=L.useState([]),ce=I1[0],K1=I1[1],Z1=L.useState(!1),ue=Z1[0],m1=Z1[1],D1=L.useState([-1,-1]),$1=D1[0],q1=D1[1],p1=function(){return p([-1,-1])},$=function(){return Z([-1,-1])},w1=function(){return H([])},z1=function(){return V1([])},y1=function(){return P(function(k){return k==="white"?"black":"white"})},a1=function(){return A1([])},o1=function(){return k1([-1,-1])},i1=function(){return K1([])};L.useEffect(function(){u(a3(n))},[]),L.useEffect(function(){if(D.length>0){var A=i.getGameResult(d,D,I,O);A&&o(A)}},[d,D,O,I]);var l1=function(){F(void 0),p1(),$(),w1()},Ce=function(){b1(void 0),o1(),z1()},fe=function(){l1(),C(function(k){return i.reverseChessBoard(k)}),v1(function(k){return!k})},U1=function(k){var E=d[k[1]][k[0]];if(!E.figure)return l1(),{figure:void 0,nextMoves:[]};var M=E.figure;if(M.color!==I)return l1(),{figure:void 0,nextMoves:[]};var x=i.getNextMoves(d,k,D,O);return{figure:E.figure,nextMoves:x}},Q1=function(k){var E=U1(k),M=E.figure,x=E.nextMoves;M&&(b1(M),k1(k),V1(x))},de=function(k){var E=U1(k),M=E.figure,x=E.nextMoves;M&&(F(M),H(x),p(k))},he=function(k,E,M){var x=X1(y,E),T=(E[0]!==k[0]||E[1]!==k[1])&&x;if(!T)return{};var G=i.changeState(d,M,E,k,O),q=G.updatedCells,L1=G.attackedPos,S1=i.getLinesWithCheck(q,I,O);if(X(S1),e1===void 0&&C(q),M.type==="pawn"&&(E[1]===0||E[1]===d.length-1))return q1(E),m1(!0),{};var F1=I==="white"?"black":"white",M1=W1(q,F1),_1={figure:M,from:k,to:E,FEN:M1};return y1(),F(void 0),p1(),$(),i1(),a1(),{moveData:_1,attackedPos:L1}},ve=function(k,E,M){var x=X1(t1,E),T=(E[0]!==k[0]||E[1]!==k[1])&&x;if(!T)return{};var G=i.changeState(d,M,E,k,O),q=G.updatedCells,L1=G.attackedPos,S1=i.getLinesWithCheck(q,I,O);if(X(S1),e1===void 0&&C(q),M.type==="pawn"&&(E[1]===0||E[1]===d.length-1))return q1(E),m1(!0),{};var F1=I==="white"?"black":"white",M1=W1(q,F1),_1={figure:M,from:k,to:E,FEN:M1};return y1(),b1(void 0),o1(),$(),i1(),a1(),{moveData:_1,attackedPos:L1}},se=function(k,E){Z([k,E])},ge=function(k,E){if(E===void 0&&(E=!1),s[0]===-1){$();return}if(B){if(y.length===0){$();return}var M=Q(y,k);if(!M){$();return}var x=he(s,k,B),T=x.moveData,G=x.attackedPos;if(!T){$();return}r(T),U({move:T,withTransition:E,attackedPos:G}),$(),w1()}},ke=function(k,E){if(n1[0]!==-1&&T1&&t1.length!==0){var M=Q(t1,k);if(M){var x=ve(n1,k,T1),T=x.moveData,G=x.attackedPos;T&&(r(T),U({move:T,withTransition:E,attackedPos:G}),o1(),z1())}}},be=function(k){if(a1(),i1(),n1[0]===-1){Q1(k);return}var E=Q(t1,k);if(!E){Ce();return}ke(k,!0)},Ee=function(k){l1(),A1(function(E){var M=[].concat(E),x=M.findIndex(function(T){var G=T[0],q=T[1];return G===k[0]&&q===k[1]});return x!==-1?E.filter(function(T,G){return G!==x}):[].concat(M,[k])})},me=function(k){var E=k[0],M=k[1];if(d.length===0)return!1;var x=d[M][E];return x.figure?n3(x,I,D):!1},pe=function(k){var E=[(k[0]+1)*l.cellSize-l.cellSize/2-10,(k[1]+1)*l.cellSize-l.cellSize/2];O1(E)},we=function(k){var E=k[0],M=k[1];E1[0]!==-1&&(K1(function(x){var T=[].concat(x);return[].concat(T,[{start:[].concat(E1),end:ae([E,M],l)}])}),O1([-1,-1]))},ye=function(k){var E=s[0]>-1?s:n1,M=i.transformPawnToFigure(d,E,$1,k),x={figure:k,from:E,to:$1,type:"transform"};r(x),C(M),y1(),U({move:x,withTransition:!1,transformTo:k});var T=i.getLinesWithCheck(M,I,O);X(T),$(),w1(),a1(),m1(!1),o1(),F(void 0),p([-1,-1]),k1([-1,-1]),i1()},Le=function(k){le(k)};return{fromPos:s,newMove:g1,boardConfig:l,markedCells:oe,grabbingPos:R,actualState:d,currentColor:I,arrowsCoords:ce,initialState:h,holdedFigure:B,grabbingCell:ie,possibleMoves:y,linesWithCheck:D,startArrowCoord:E1,showFigurePicker:ue,markCell:Ee,setNewMove:U,handleClick:be,clearFromPos:p1,handleGrabEnd:ge,handleGrabbing:se,endRenderArrow:we,setActualState:C,setCurrentColor:P,selectClickFrom:Q1,selectHoverFrom:de,setInitialState:f,startRenderArrow:pe,reverseChessBoard:fe,handleGrabbingCell:Le,getHasCheckByCellPos:me,handleSelectFigurePicker:ye}},h3=function(e){var n=e.holdedFigure,r=e.grabbingPos,o=e.boardConfig,a=n&&r[0]>-1&&r[1]>-1;return a&&v.createElement("div",{className:Y([N.figure,N.holdedFigure]),style:{position:"fixed",zIndex:6,top:r[1]-o.cellSize/2+"px",left:r[0]-o.cellSize/2+"px",width:o.cellSize,height:o.cellSize}}," ",o.piecesMap[h1(n)]("80%"))},v3=8,s3=function(e){var n=e.size,r=n===void 0?v3:n,o=e.boardConfig,a=e.selectedPos,l=e.possibleMoves,u=e.holdedFigure,c=e.grabbingPos,h=e.markedCells,f=e.onHasCheck;return v.createElement("div",null,v.createElement(h3,{holdedFigure:u,grabbingPos:c,boardConfig:o}),v.createElement("div",{className:N.interactiveLayout},W(r).map(function(b,d){return v.createElement("div",{className:N.row,key:"interactive-layout-"+d},W(r).map(function(C,g){var s,p;return v.createElement("div",{className:Y(N.interactiveCell,(s={},s[N.selectedCell]=a[0]===g&&a[1]===d,s[N.markedCell]=Q(h,[g,d]),s[N.checkedCell]=f([g,d]),s)),key:"interactive-layout-"+g,style:{width:o.cellSize,height:o.cellSize,backgroundColor:a[0]===g&&a[1]===d?o.selectedCellColor:"transparent",border:a[0]===g&&a[1]===d?o.selectedCellBorder:"none",boxShadow:Q(h,[g,d])?"inset 0 0 30px "+o.markedCellColor:f([g,d])?"inset 0 0 30px "+o.checkedCellColor:"none"}},a[0]===g&&a[1]===d&&u&&v.createElement("div",{className:Y([N.figure,N.holdedFigure],(p={},p[N.bluredFigure]=c[0]!==-1,p)),style:{width:o.cellSize,height:o.cellSize}},o.piecesMap[h1(u)]("80%")),Q(l,[g,d])&&v.createElement("div",{className:N.possibleMoveMark,style:{width:o.cellSize/J1,height:o.cellSize/J1,backgroundColor:o.circleMarkColor}}))}))})))},Y1=20,j1=function(e){var n=e.start,r=e.end,o=e.color,a=L.useMemo(function(){return Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2))},[n,r]);return a<=Y1*3?null:v.createElement("div",{className:N.arrow,style:{height:a-Y1,top:n[1]+"px",left:n[0]+"px",transformOrigin:"10px 0",transform:"rotate("+t3(n,r)+"deg)",backgroundColor:o}},v.createElement("div",{className:N.arrowEnd,style:{borderLeftColor:o}}))},g3=function(e){var n=e.startArrowCoord,r=e.arrowsCoords,o=e.grabbingPos,a=e.boardConfig;return v.createElement("div",{className:N.arrowsLayer},n[0]>-1&&o[0]>-1&&v.createElement(j1,{start:n,end:o,color:a.arrowColor}),r.map(function(l,u){return v.createElement(j1,Object.assign({key:u},l,{color:a.arrowColor}))}))},k3=function(e){var n=e.boardConfig,r=e.color,o=e.onSelect,a=e.forPawnTransform,l=a===void 0?!1:a,u=L.useCallback(function(c){o(c)},[o]);return v.createElement("div",{className:N.figurePicker},o3(r,l).map(function(c){return v.createElement("div",{key:c.type,className:N.figurePickerItem,style:{width:n.cellSize,height:n.cellSize},onClick:function(){return u(c)}},n.piecesMap[h1(c)]("80%"))}))},z=function(e){var n=e.FEN,r=e.onChange,o=e.onEndGame,a=e.change,l=e.reversed,u=e.config,c=d3({onChange:r,onEndGame:o,config:u}),h=c.initialState,f=c.fromPos,b=c.holdedFigure,d=c.grabbingPos,C=c.possibleMoves,g=c.newMove,s=c.markedCells,p=c.arrowsCoords,S=c.startArrowCoord,B=c.boardConfig,F=c.currentColor,w=c.showFigurePicker,R=c.grabbingCell,Z=c.setActualState,V=c.startRenderArrow,y=c.selectHoverFrom,H=c.handleGrabbing,m=c.handleGrabEnd,O=c.handleClick,v1=c.setInitialState,j=c.setCurrentColor,I=c.reverseChessBoard,P=c.setNewMove,s1=c.markCell,e1=c.getHasCheckByCellPos,r1=c.endRenderArrow,g1=c.handleSelectFigurePicker,U=c.handleGrabbingCell;return L.useEffect(function(){var J=Ie(n),D=J.boardState,X=J.currentColor;v1(D),Z(D),j(X)},[n]),L.useEffect(function(){l&&I()},[l]),L.useEffect(function(){P(a)},[a]),v.createElement("div",{className:N.chessBoard},v.createElement(c3,{boardConfig:B}),v.createElement(u3,{initialState:h,change:g,reversed:l,boardConfig:B}),v.createElement(s3,{selectedPos:f,possibleMoves:C,holdedFigure:b,grabbingPos:i3(d),markedCells:s,boardConfig:B,onHasCheck:e1}),v.createElement(g3,{arrowsCoords:p,startArrowCoord:S,grabbingPos:ae(R,B),boardConfig:B}),v.createElement(f3,{boardConfig:B,onClick:O,onGrabStart:y,onGrabStartRight:V,onGrabEnd:m,onGrabEndRight:r1,onGrabbing:H,onRightClick:s1,onGrabbingCell:U}),w&&v.createElement("div",{className:N.chessBoardFigurePicker},v.createElement(k3,{boardConfig:B,color:F,forPawnTransform:!0,onSelect:g1})))};const p3=()=>K.jsx(z,{FEN:"2K2k2/8/8/8/8/8/8/8 w - - 0 1",onChange:t=>{},onEndGame:()=>{},config:{cellSize:100}}),w3=()=>K.jsx(z,{FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",onChange:t=>{},onEndGame:()=>{},config:{cellSize:70}}),y3=()=>K.jsx(z,{FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",onChange:t=>{},onEndGame:()=>{},config:{cellSize:70}}),L3=()=>K.jsx(z,{FEN:"8/8/8/8/8/8/1K6/P7 w - - 0 1",onChange:t=>{console.log(t)},onEndGame:()=>{},config:{cellSize:70}}),S3=()=>K.jsx(z,{FEN:"3k4/qqqqqqqq/8/8/8/8/QQQQQQQQ/3K4 b - - 0 1",onChange:t=>{},onEndGame:()=>{},config:{cellSize:70}}),F3=()=>K.jsx(z,{FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",onChange:t=>{},onEndGame:()=>{},config:{cellSize:70},reversed:!0}),b3={cellSize:70,selectedCellColor:"gray",selectedCellBorder:"4px dashed black",circleMarkColor:"red",whiteCellColor:"#166",blackCellColor:"#e0e0e0",arrowColor:"red",markedCellColor:"red",checkedCellColor:"green",piecesMap:{...te,"pawn-white":()=>K.jsx("img",{width:40,src:"https://pics.clipartpng.com/midle/Pawn_White_Chess_Piece_PNG_Clip_Art-2751.png"}),"pawn-black":()=>K.jsx("img",{width:40,src:"https://pics.clipartpng.com/midle/Pawn_Black_Chess_Piece_PNG_Clip_Art-2764.png"}),"knight-white":()=>K.jsx("img",{height:100,src:"https://purepng.com/public/uploads/thumbnail//purepng.com-white-horse-jumpinghorsejumpingwhite-horsemountknighthackneyprad-481520976081ixkeq.png"})}},M3=()=>K.jsx(z,{FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",onChange:t=>{},onEndGame:()=>{},config:b3});export{S3 as ChessBoardClonsFEN,M3 as ChessBoardCustomConfig,w3 as ChessBoardDefault,y3 as ChessBoardDefaultFEN,L3 as ChessBoardKingPawnFEN,p3 as ChessBoardKings,F3 as ChessBoardReversed};
